@using CollectApp.Extensions
@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Authorization
@inject IAuthorizationService AuthorizationService
@model CollectApp.ViewModels.ChangeCollectStatusViewModel

@{
    bool CanChangeCollectStatus = (await AuthorizationService.AuthorizeAsync(User, "CanChangeCollectStatus")).Succeeded;
}

<div class="d-flex justify-content-end gap-2">
    @if (Model.Status.CanChangeStatus() && CanChangeCollectStatus)
    {
        <form asp-controller="Collect" asp-action="ChangeCollectStatus" method="post">
            <input asp-for="Id" type="hidden" value="@Model.Id">
            <button class="p-0 border-0 bg-transparent">
                <img src="~/assets/img/check-icon.svg" alt="Check button" width="24" height="24" />
            </button>
        </form>
    }
</div>